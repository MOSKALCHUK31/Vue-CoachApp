{"remainingRequest":"/Users/moskalchuk/Documents/FrontEnd/projects/Vue/Vue [CoachApp]/node_modules/babel-loader/lib/index.js!/Users/moskalchuk/Documents/FrontEnd/projects/Vue/Vue [CoachApp]/src/store/modules/coaches/index.js","dependencies":[{"path":"/Users/moskalchuk/Documents/FrontEnd/projects/Vue/Vue [CoachApp]/src/store/modules/coaches/index.js","mtime":1670329489436},{"path":"/Users/moskalchuk/Documents/FrontEnd/projects/Vue/Vue [CoachApp]/babel.config.js","mtime":1670329489426},{"path":"/Users/moskalchuk/Documents/FrontEnd/projects/Vue/Vue [CoachApp]/node_modules/cache-loader/dist/cjs.js","mtime":1670329551489},{"path":"/Users/moskalchuk/Documents/FrontEnd/projects/Vue/Vue [CoachApp]/node_modules/babel-loader/lib/index.js","mtime":1670329551786}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmVycm9yLmNhdXNlLmpzIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGUoKSB7CiAgICByZXR1cm4gewogICAgICBsYXN0RmV0Y2g6IG51bGwsCiAgICAgIGNvYWNoZXM6IFtdCiAgICB9OwogIH0sCiAgZ2V0dGVyczogewogICAgY29hY2hlcyhzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuY29hY2hlczsKICAgIH0sCiAgICBoYXNDb2FjaGVzKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5jb2FjaGVzICYmIHN0YXRlLmNvYWNoZXMubGVuZ3RoID4gMDsKICAgIH0sCiAgICBpc0NvYWNoKF8sIGdldHRlcnMsIF8zLCByb290R2V0dGVycykgewogICAgICBjb25zdCBjb2FjaGVzID0gZ2V0dGVycy5jb2FjaGVzOwogICAgICBjb25zdCB1c2VySWQgPSByb290R2V0dGVycy5nZXRVc2VySWQ7CiAgICAgIHJldHVybiBjb2FjaGVzLnNvbWUoZWwgPT4gZWwuaWQgPT09IHVzZXJJZCk7CiAgICB9LAogICAgc2hvdWxkVXBkYXRlKHN0YXRlKSB7CiAgICAgIGlmICghc3RhdGUubGFzdEZldGNoKSByZXR1cm4gdHJ1ZTsKICAgICAgY29uc3QgY3VycmVudFRpbWVzdGFtcCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgICByZXR1cm4gKGN1cnJlbnRUaW1lc3RhbXAgLSBzdGF0ZS5sYXN0RmV0Y2gpIC8gMTAwMCA+IDYwOwogICAgfQogIH0sCiAgbXV0YXRpb25zOiB7CiAgICBjb2FjaFJlZ2lzdHJhdGlvbihzdGF0ZSwgcGF5bG9hZCkgewogICAgICBzdGF0ZS5jb2FjaGVzLnB1c2gocGF5bG9hZCk7CiAgICB9LAogICAgc2V0Q29hY2hlcyhzdGF0ZSwgcGF5bG9hZCkgewogICAgICBzdGF0ZS5jb2FjaGVzID0gcGF5bG9hZDsKICAgIH0sCiAgICBzZXRUaW1lc3RhbXAoc3RhdGUpIHsKICAgICAgc3RhdGUubGFzdEZldGNoID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CiAgICB9CiAgfSwKICBhY3Rpb25zOiB7CiAgICBhc3luYyBjb2FjaFJlZ2lzdHJhdGlvbihjb250ZXh0LCBwYXlsb2FkKSB7CiAgICAgIGNvbnN0IHVzZXJJZCA9IGNvbnRleHQucm9vdEdldHRlcnMuZ2V0VXNlcklkOwogICAgICBjb25zdCB0cmFuc2Zvcm1lZERhdGEgPSB7CiAgICAgICAgZmlyc3ROYW1lOiBwYXlsb2FkLmZpcnN0LAogICAgICAgIGxhc3ROYW1lOiBwYXlsb2FkLmxhc3QsCiAgICAgICAgZGVzY3JpcHRpb246IHBheWxvYWQuZGVzYywKICAgICAgICBob3VybHlSYXRlOiBwYXlsb2FkLnJhdGUsCiAgICAgICAgYXJlYXM6IHBheWxvYWQuYXJlYXMKICAgICAgfTsKICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgaHR0cHM6Ly9jb2FjaGFwcC0zZDM4ZC1kZWZhdWx0LXJ0ZGIuZXVyb3BlLXdlc3QxLmZpcmViYXNlZGF0YWJhc2UuYXBwL2NvYWNoZXMvJHt1c2VySWR9Lmpzb25gLCB7CiAgICAgICAgbWV0aG9kOiAnUFVUJywKICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh0cmFuc2Zvcm1lZERhdGEpCiAgICAgIH0pOwogICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7CiAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yJyk7CiAgICAgIH0KICAgICAgY29udGV4dC5jb21taXQoJ2NvYWNoUmVnaXN0cmF0aW9uJywgewogICAgICAgIC4uLnRyYW5zZm9ybWVkRGF0YSwKICAgICAgICBpZDogdXNlcklkCiAgICAgIH0pOwogICAgfSwKICAgIGFzeW5jIGxvYWRDb2FjaGVzKHsKICAgICAgY29tbWl0LAogICAgICBnZXR0ZXJzCiAgICB9LCBwYXlsb2FkKSB7CiAgICAgIGlmICghcGF5bG9hZC5mb3JjZVJlZnJlc2ggJiYgIWdldHRlcnMuc2hvdWxkVXBkYXRlKSByZXR1cm47CiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29hY2hhcHAtM2QzOGQtZGVmYXVsdC1ydGRiLmV1cm9wZS13ZXN0MS5maXJlYmFzZWRhdGFiYXNlLmFwcC9jb2FjaGVzLmpzb24nKTsKICAgICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpOwogICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7CiAgICAgIH0KICAgICAgY29uc3QgY29hY2hlcyA9IFtdOwogICAgICBmb3IgKGNvbnN0IGtleSBpbiByZXNwb25zZURhdGEpIHsKICAgICAgICBjb25zdCBjb2FjaCA9IHsKICAgICAgICAgIGlkOiBrZXksCiAgICAgICAgICBmaXJzdE5hbWU6IHJlc3BvbnNlRGF0YVtrZXldLmZpcnN0TmFtZSwKICAgICAgICAgIGxhc3ROYW1lOiByZXNwb25zZURhdGFba2V5XS5sYXN0TmFtZSwKICAgICAgICAgIGFyZWFzOiByZXNwb25zZURhdGFba2V5XS5hcmVhcywKICAgICAgICAgIGhvdXJseVJhdGU6IHJlc3BvbnNlRGF0YVtrZXldLmhvdXJseVJhdGUsCiAgICAgICAgICBkZXNjcmlwdGlvbjogcmVzcG9uc2VEYXRhW2tleV0uZGVzY3JpcHRpb24KICAgICAgICB9OwogICAgICAgIGNvYWNoZXMucHVzaChjb2FjaCk7CiAgICAgIH0KICAgICAgY29tbWl0KCdzZXRDb2FjaGVzJywgY29hY2hlcyk7CiAgICAgIGNvbW1pdCgnc2V0VGltZXN0YW1wJyk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["namespaced","state","lastFetch","coaches","getters","hasCoaches","length","isCoach","_","_3","rootGetters","userId","getUserId","some","el","id","shouldUpdate","currentTimestamp","Date","getTime","mutations","coachRegistration","payload","push","setCoaches","setTimestamp","actions","context","transformedData","firstName","first","lastName","last","description","desc","hourlyRate","rate","areas","response","fetch","method","body","JSON","stringify","ok","console","log","commit","loadCoaches","forceRefresh","responseData","json","Error","key","coach"],"sources":["/Users/moskalchuk/Documents/FrontEnd/projects/Vue/Vue [CoachApp]/src/store/modules/coaches/index.js"],"sourcesContent":["export default {\n    namespaced: true,\n    state() {\n        return {\n            lastFetch: null,\n            coaches: []\n        }\n    },\n    getters: {\n        coaches(state) {\n            return state.coaches\n        },\n        hasCoaches(state) {\n            return state.coaches && state.coaches.length > 0\n        },\n        isCoach(_, getters, _3, rootGetters) {\n            const coaches = getters.coaches\n            const userId = rootGetters.getUserId\n\n            return coaches.some(el => el.id === userId)\n        },\n        shouldUpdate(state) {\n            if(!state.lastFetch) return true\n\n            const currentTimestamp = new Date().getTime()\n\n            return (currentTimestamp - state.lastFetch) / 1000 > 60\n        }\n    },\n    mutations: {\n        coachRegistration(state, payload) {\n            state.coaches.push(payload)\n        },\n        setCoaches(state, payload) {\n            state.coaches = payload\n        },\n        setTimestamp(state) {\n            state.lastFetch = new Date().getTime()\n        }\n    },\n    actions: {\n        async coachRegistration(context, payload) {\n            const userId = context.rootGetters.getUserId\n\n            const transformedData = {\n                firstName: payload.first,\n                lastName: payload.last,\n                description: payload.desc,\n                hourlyRate: payload.rate,\n                areas: payload.areas\n            }\n\n            const response = await fetch(`https://coachapp-3d38d-default-rtdb.europe-west1.firebasedatabase.app/coaches/${userId}.json`, {\n                method: 'PUT',\n                body: JSON.stringify(transformedData)\n            })\n\n            if (!response.ok) {\n                console.log('error')\n            }\n            \n            context.commit('coachRegistration', {\n                ...transformedData,\n                id: userId\n            })\n        },\n        async loadCoaches({ commit, getters }, payload) {\n            if(!payload.forceRefresh && !getters.shouldUpdate) return\n\n            const response = await fetch('https://coachapp-3d38d-default-rtdb.europe-west1.firebasedatabase.app/coaches.json')\n            const responseData = await response.json()\n\n            if (!response.ok) {\n                throw new Error()\n            }\n\n            const coaches = []\n\n            for (const key in responseData) {\n                const coach = {\n                    id: key,\n                    firstName: responseData[key].firstName,\n                    lastName: responseData[key].lastName,\n                    areas: responseData[key].areas,\n                    hourlyRate: responseData[key].hourlyRate,\n                    description: responseData[key].description\n                }\n\n                coaches.push(coach)\n            }\n\n            commit('setCoaches', coaches)\n            commit('setTimestamp')\n        }\n    }\n}"],"mappings":"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"}]}