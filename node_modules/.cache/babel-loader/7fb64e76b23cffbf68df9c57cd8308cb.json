{"remainingRequest":"/Users/moskalchuk/Documents/FrontEnd/projects/Vue/Vue [CoachApp]/node_modules/babel-loader/lib/index.js!/Users/moskalchuk/Documents/FrontEnd/projects/Vue/Vue [CoachApp]/src/store/modules/requests/index.js","dependencies":[{"path":"/Users/moskalchuk/Documents/FrontEnd/projects/Vue/Vue [CoachApp]/src/store/modules/requests/index.js","mtime":1670329489436},{"path":"/Users/moskalchuk/Documents/FrontEnd/projects/Vue/Vue [CoachApp]/babel.config.js","mtime":1670329489426},{"path":"/Users/moskalchuk/Documents/FrontEnd/projects/Vue/Vue [CoachApp]/node_modules/cache-loader/dist/cjs.js","mtime":1670329551489},{"path":"/Users/moskalchuk/Documents/FrontEnd/projects/Vue/Vue [CoachApp]/node_modules/babel-loader/lib/index.js","mtime":1670329551786}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmVycm9yLmNhdXNlLmpzIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGUoKSB7CiAgICByZXR1cm4gewogICAgICByZXF1ZXN0czogW10KICAgIH07CiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIGNvbnRhY3RDb2FjaChzdGF0ZSwgcGF5bG9hZCkgewogICAgICBzdGF0ZS5yZXF1ZXN0cy5wdXNoKHBheWxvYWQpOwogICAgfSwKICAgIGdldFJlcXVlc3RzKHN0YXRlLCBwYXlsb2FkKSB7CiAgICAgIHN0YXRlLnJlcXVlc3RzID0gcGF5bG9hZDsKICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIGFzeW5jIGNvbnRhY3RDb2FjaChjb250ZXh0LCBwYXlsb2FkKSB7CiAgICAgIGNvbnN0IGNvYWNoSWQgPSBwYXlsb2FkLmNvYWNoSWQ7CiAgICAgIGNvbnN0IG5ld1JlcXVlc3QgPSB7CiAgICAgICAgZW1haWw6IHBheWxvYWQuZW1haWwsCiAgICAgICAgbWVzc2FnZTogcGF5bG9hZC5tZXNzYWdlCiAgICAgIH07CiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYGh0dHBzOi8vY29hY2hhcHAtM2QzOGQtZGVmYXVsdC1ydGRiLmV1cm9wZS13ZXN0MS5maXJlYmFzZWRhdGFiYXNlLmFwcC9yZXF1ZXN0cy8ke2NvYWNoSWR9Lmpzb25gLCB7CiAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkobmV3UmVxdWVzdCkKICAgICAgfSk7CiAgICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsKICAgICAgaWYgKCFyZXNwb25zZS5vaykgdGhyb3cgbmV3IEVycm9yKCk7CiAgICAgIG5ld1JlcXVlc3QuaWQgPSByZXNwb25zZURhdGEubmFtZTsKICAgICAgbmV3UmVxdWVzdC5jb2FjaElkID0gY29hY2hJZDsKICAgICAgY29udGV4dC5jb21taXQoJ2NvbnRhY3RDb2FjaCcsIG5ld1JlcXVlc3QpOwogICAgfSwKICAgIGFzeW5jIGdldFJlcXVlc3RzKGNvbnRleHQpIHsKICAgICAgY29uc3QgY29hY2hJZCA9IGNvbnRleHQucm9vdEdldHRlcnMuZ2V0VXNlcklkOwogICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGBodHRwczovL2NvYWNoYXBwLTNkMzhkLWRlZmF1bHQtcnRkYi5ldXJvcGUtd2VzdDEuZmlyZWJhc2VkYXRhYmFzZS5hcHAvcmVxdWVzdHMvJHtjb2FjaElkfS5qc29uYCk7CiAgICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsKICAgICAgY29uc3QgcmVxdWVzdHMgPSBbXTsKICAgICAgZm9yIChjb25zdCBrZXkgaW4gcmVzcG9uc2VEYXRhKSB7CiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHsKICAgICAgICAgIGlkOiBrZXksCiAgICAgICAgICBjb2FjaElkOiBjb2FjaElkLAogICAgICAgICAgZW1haWw6IHJlc3BvbnNlRGF0YVtrZXldLmVtYWlsLAogICAgICAgICAgbWVzc2FnZTogcmVzcG9uc2VEYXRhW2tleV0ubWVzc2FnZQogICAgICAgIH07CiAgICAgICAgcmVxdWVzdHMucHVzaChyZXF1ZXN0KTsKICAgICAgfQogICAgICBjb250ZXh0LmNvbW1pdCgnZ2V0UmVxdWVzdHMnLCByZXF1ZXN0cyk7CiAgICB9CiAgfSwKICBnZXR0ZXJzOiB7CiAgICBnZXRSZXF1ZXN0cyhzdGF0ZSwgX2dldHRlcnMsIF9yb290U3RhdGUsIHJvb3RHZXR0ZXJzKSB7CiAgICAgIGNvbnN0IGNvYWNoSWQgPSByb290R2V0dGVycy5nZXRVc2VySWQ7CiAgICAgIHJldHVybiBzdGF0ZS5yZXF1ZXN0cy5maWx0ZXIoZWwgPT4gZWwuY29hY2hJZCA9PT0gY29hY2hJZCk7CiAgICB9LAogICAgaGFzUmVxdWVzdHMoX3N0YXRlLCBnZXR0ZXJzKSB7CiAgICAgIHJldHVybiBnZXR0ZXJzLmdldFJlcXVlc3RzICYmIGdldHRlcnMuZ2V0UmVxdWVzdHMubGVuZ3RoID4gMDsKICAgIH0KICB9Cn07"},{"version":3,"names":["namespaced","state","requests","mutations","contactCoach","payload","push","getRequests","actions","context","coachId","newRequest","email","message","response","fetch","method","body","JSON","stringify","responseData","json","ok","Error","id","name","commit","rootGetters","getUserId","key","request","getters","_getters","_rootState","filter","el","hasRequests","_state","length"],"sources":["/Users/moskalchuk/Documents/FrontEnd/projects/Vue/Vue [CoachApp]/src/store/modules/requests/index.js"],"sourcesContent":["export default {\n    namespaced: true,\n    state() {\n        return {\n            requests: []\n        }\n    },\n    mutations: {\n        contactCoach(state, payload) {\n            state.requests.push(payload)\n        },\n        getRequests(state, payload) {\n            state.requests = payload\n        }\n    },\n    actions: {\n        async contactCoach(context, payload) {\n            const coachId = payload.coachId\n\n            const newRequest = {\n                email: payload.email,\n                message: payload.message\n            }\n\n            const response = await fetch(`https://coachapp-3d38d-default-rtdb.europe-west1.firebasedatabase.app/requests/${coachId}.json`, {\n                method: 'POST',\n                body: JSON.stringify(newRequest)\n            })\n\n            const responseData = await response.json()\n\n            if (!response.ok) throw new Error()\n            \n            newRequest.id = responseData.name\n            newRequest.coachId = coachId\n\n            context.commit('contactCoach', newRequest)\n        },\n        async getRequests(context) {\n            const coachId = context.rootGetters.getUserId\n            const response = await fetch(`https://coachapp-3d38d-default-rtdb.europe-west1.firebasedatabase.app/requests/${coachId}.json`)\n            const responseData = await response.json()\n\n            const requests = []\n\n            for (const key in responseData) {\n                const request = {\n                    id: key,\n                    coachId: coachId,\n                    email: responseData[key].email,\n                    message: responseData[key].message\n                }\n\n                requests.push(request)\n            }\n\n            context.commit('getRequests', requests)\n        }\n    },\n    getters: {\n        getRequests(state, _getters, _rootState, rootGetters) {\n            const coachId = rootGetters.getUserId\n            return state.requests.filter(el => el.coachId === coachId)\n        },\n        hasRequests(_state, getters) {\n            return getters.getRequests && getters.getRequests.length > 0\n        }\n    }\n}"],"mappings":";;AAAA,eAAe;EACXA,UAAU,EAAE,IAAI;EAChBC,KAAK,GAAG;IACJ,OAAO;MACHC,QAAQ,EAAE;IACd,CAAC;EACL,CAAC;EACDC,SAAS,EAAE;IACPC,YAAY,CAACH,KAAK,EAAEI,OAAO,EAAE;MACzBJ,KAAK,CAACC,QAAQ,CAACI,IAAI,CAACD,OAAO,CAAC;IAChC,CAAC;IACDE,WAAW,CAACN,KAAK,EAAEI,OAAO,EAAE;MACxBJ,KAAK,CAACC,QAAQ,GAAGG,OAAO;IAC5B;EACJ,CAAC;EACDG,OAAO,EAAE;IACL,MAAMJ,YAAY,CAACK,OAAO,EAAEJ,OAAO,EAAE;MACjC,MAAMK,OAAO,GAAGL,OAAO,CAACK,OAAO;MAE/B,MAAMC,UAAU,GAAG;QACfC,KAAK,EAAEP,OAAO,CAACO,KAAK;QACpBC,OAAO,EAAER,OAAO,CAACQ;MACrB,CAAC;MAED,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAE,kFAAiFL,OAAQ,OAAM,EAAE;QAC3HM,MAAM,EAAE,MAAM;QACdC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACR,UAAU;MACnC,CAAC,CAAC;MAEF,MAAMS,YAAY,GAAG,MAAMN,QAAQ,CAACO,IAAI,EAAE;MAE1C,IAAI,CAACP,QAAQ,CAACQ,EAAE,EAAE,MAAM,IAAIC,KAAK,EAAE;MAEnCZ,UAAU,CAACa,EAAE,GAAGJ,YAAY,CAACK,IAAI;MACjCd,UAAU,CAACD,OAAO,GAAGA,OAAO;MAE5BD,OAAO,CAACiB,MAAM,CAAC,cAAc,EAAEf,UAAU,CAAC;IAC9C,CAAC;IACD,MAAMJ,WAAW,CAACE,OAAO,EAAE;MACvB,MAAMC,OAAO,GAAGD,OAAO,CAACkB,WAAW,CAACC,SAAS;MAC7C,MAAMd,QAAQ,GAAG,MAAMC,KAAK,CAAE,kFAAiFL,OAAQ,OAAM,CAAC;MAC9H,MAAMU,YAAY,GAAG,MAAMN,QAAQ,CAACO,IAAI,EAAE;MAE1C,MAAMnB,QAAQ,GAAG,EAAE;MAEnB,KAAK,MAAM2B,GAAG,IAAIT,YAAY,EAAE;QAC5B,MAAMU,OAAO,GAAG;UACZN,EAAE,EAAEK,GAAG;UACPnB,OAAO,EAAEA,OAAO;UAChBE,KAAK,EAAEQ,YAAY,CAACS,GAAG,CAAC,CAACjB,KAAK;UAC9BC,OAAO,EAAEO,YAAY,CAACS,GAAG,CAAC,CAAChB;QAC/B,CAAC;QAEDX,QAAQ,CAACI,IAAI,CAACwB,OAAO,CAAC;MAC1B;MAEArB,OAAO,CAACiB,MAAM,CAAC,aAAa,EAAExB,QAAQ,CAAC;IAC3C;EACJ,CAAC;EACD6B,OAAO,EAAE;IACLxB,WAAW,CAACN,KAAK,EAAE+B,QAAQ,EAAEC,UAAU,EAAEN,WAAW,EAAE;MAClD,MAAMjB,OAAO,GAAGiB,WAAW,CAACC,SAAS;MACrC,OAAO3B,KAAK,CAACC,QAAQ,CAACgC,MAAM,CAACC,EAAE,IAAIA,EAAE,CAACzB,OAAO,KAAKA,OAAO,CAAC;IAC9D,CAAC;IACD0B,WAAW,CAACC,MAAM,EAAEN,OAAO,EAAE;MACzB,OAAOA,OAAO,CAACxB,WAAW,IAAIwB,OAAO,CAACxB,WAAW,CAAC+B,MAAM,GAAG,CAAC;IAChE;EACJ;AACJ,CAAC"}]}